<div class="container">
  <div class="message-header">
    <h1>Roast History of <%= @person.name %></h1>
  </div>
  <div class="content">
    <div class="messages-list">
      <% if @chat.messages.any? %>
        <% @chat.messages.each do |message| %>
          <div class="message <%= 'user-message' if message.role == "user" %> <%= 'bot-message' if message.role == "bot" %>">
            <div class="message-header">
              <span><%= message.created_at %></span>
            </div>
            <div class="message-body">
              <%= message.content %>
            </div>
          </div>
        <% end %>
      <% else %>
        <p>No chats found for this person. Start a new one!</p>
      <% end %>
    </div>
  </div>
  <div class="message-form">
    <%= form_with(model: [@person, @chat, @message], local: true) do |f| %>
      <div class="form-row">
        <%= f.text_field :content, placeholder: "Type a message..." %>
        <%= f.submit "Send", class: "btn btn-warning" %>
      </div>
    <% end %>
  </div>
<div class="footer d-flex mt-3">
  <%= link_to "Start a New Chat", new_person_chat_path(@person, @chat), class: "btn btn-dark me-2" %>

  <%= button_to "Delete", chat_path(@chat),
        method: :delete,
        data: { turbo_confirm: "Are you sure you want to delete this chat?" },
        class: "btn btn-dark" %>
</div>
